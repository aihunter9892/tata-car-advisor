<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tata Car Advisor â€” Powered by AI</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300&family=Barlow+Condensed:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN: Clean White â€” Tata Motors Official
   Inspired by tata.com editorial language
   Tight grid, Barlow type, electric blue accent
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --white:      #FFFFFF;
  --off-white:  #F7F8FA;
  --grey-50:    #F2F4F7;
  --grey-100:   #E4E8ED;
  --grey-200:   #CDD3DC;
  --grey-400:   #8E9BAC;
  --grey-600:   #4A5568;
  --grey-900:   #1A202C;
  --black:      #0A0E14;

  /* Tata blue palette */
  --blue:       #003399;   /* Primary Tata blue */
  --blue-mid:   #0055CC;
  --blue-light: #0070F3;
  --blue-glow:  rgba(0,51,153,0.12);
  --blue-line:  rgba(0,51,153,0.2);

  /* Accent */
  --electric:   #0066FF;
  --electric-10:#EBF3FF;

  /* Status */
  --green:      #00A651;   /* Tata green */
  --green-light:#E6F7EF;
  --amber:      #F59E0B;
  --amber-light:#FEF3C7;
  --red:        #DC2626;
  --red-light:  #FEE2E2;

  --font:       'Barlow', sans-serif;
  --font-cond:  'Barlow Condensed', sans-serif;

  --radius-sm:  6px;
  --radius:     10px;
  --radius-lg:  16px;
  --shadow-sm:  0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
  --shadow:     0 4px 16px rgba(0,0,0,0.08);
  --shadow-lg:  0 12px 40px rgba(0,0,0,0.12);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; height: 100%; }
body {
  font-family: var(--font);
  background: var(--white);
  color: var(--grey-900);
  height: 100%;
  overflow: hidden;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbar {
  height: 56px;
  background: var(--white);
  border-bottom: 2px solid var(--blue);
  display: flex;
  align-items: center;
  padding: 0 28px;
  gap: 0;
  position: relative;
  z-index: 50;
}

/* Tata logo mark */
.logo-mark {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  flex-shrink: 0;
}

.logo-t {
  width: 36px;
  height: 36px;
  background: var(--blue);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.logo-t svg {
  width: 22px;
  height: 22px;
  fill: white;
}

.logo-text {
  display: flex;
  flex-direction: column;
  line-height: 1;
}

.logo-text .brand {
  font-family: var(--font-cond);
  font-size: 17px;
  font-weight: 700;
  letter-spacing: 2px;
  color: var(--blue);
  text-transform: uppercase;
}

.logo-text .sub {
  font-size: 10px;
  font-weight: 500;
  letter-spacing: 1.5px;
  color: var(--grey-400);
  text-transform: uppercase;
}

/* Divider */
.topbar-divider {
  width: 1px;
  height: 28px;
  background: var(--grey-100);
  margin: 0 20px;
}

.topbar-product {
  font-family: var(--font-cond);
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 1px;
  color: var(--grey-600);
  text-transform: uppercase;
}

/* Status indicators */
.topbar-status {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 8px;
}

.api-pill {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 12px 5px 8px;
  border-radius: 20px;
  font-size: 11.5px;
  font-weight: 600;
  letter-spacing: 0.3px;
  border: 1.5px solid transparent;
  transition: all 0.3s ease;
  cursor: default;
}

.api-pill.checking {
  background: var(--grey-50);
  border-color: var(--grey-100);
  color: var(--grey-400);
}

.api-pill.online {
  background: var(--green-light);
  border-color: rgba(0,166,81,0.25);
  color: var(--green);
}

.api-pill.offline {
  background: var(--red-light);
  border-color: rgba(220,38,38,0.2);
  color: var(--red);
}

.api-pill .dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: currentColor;
  flex-shrink: 0;
}

.api-pill.checking .dot {
  animation: blink 1.4s ease infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.2; }
}

/* Active provider tag */
.active-provider {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 4px 10px;
  background: var(--electric-10);
  border: 1px solid rgba(0,102,255,0.2);
  border-radius: 4px;
  font-size: 10.5px;
  font-weight: 700;
  color: var(--electric);
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APP LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.app {
  display: grid;
  grid-template-columns: 300px 1fr;
  height: calc(100vh - 56px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR / FILTER PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar {
  background: var(--off-white);
  border-right: 1px solid var(--grey-100);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.sidebar-header {
  padding: 20px 20px 16px;
  border-bottom: 1px solid var(--grey-100);
  background: var(--white);
}

.sidebar-title {
  font-family: var(--font-cond);
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--grey-400);
}

.sidebar-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.sidebar-body::-webkit-scrollbar { width: 3px; }
.sidebar-body::-webkit-scrollbar-thumb { background: var(--grey-200); }

/* Filter sections */
.filter-section {
  margin-bottom: 24px;
}

.filter-label {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--grey-400);
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.filter-label span {
  font-family: var(--font-cond);
  font-size: 13px;
  font-weight: 600;
  color: var(--blue);
  letter-spacing: 0;
  text-transform: none;
}

/* Range slider */
.range-wrap {
  position: relative;
  padding: 6px 0;
}

input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 3px;
  background: var(--grey-200);
  border-radius: 2px;
  outline: none;
  margin-bottom: 8px;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--white);
  border: 2.5px solid var(--blue);
  cursor: pointer;
  box-shadow: 0 1px 4px rgba(0,51,153,0.25);
  transition: transform 0.15s;
}

input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.2);
}

input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--white);
  border: 2.5px solid var(--blue);
  cursor: pointer;
}

/* Chips */
.chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.chip {
  padding: 5px 11px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 600;
  border: 1.5px solid var(--grey-200);
  background: var(--white);
  color: var(--grey-600);
  cursor: pointer;
  transition: all 0.15s;
  letter-spacing: 0.2px;
}

.chip:hover {
  border-color: var(--blue-light);
  color: var(--blue-light);
}

.chip.active {
  background: var(--blue);
  border-color: var(--blue);
  color: white;
}

/* City select */
.city-select {
  width: 100%;
  padding: 9px 12px;
  border: 1.5px solid var(--grey-200);
  border-radius: var(--radius-sm);
  background: var(--white);
  color: var(--grey-900);
  font-family: var(--font);
  font-size: 13px;
  font-weight: 500;
  outline: none;
  cursor: pointer;
  transition: border-color 0.15s;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24'%3E%3Cpath fill='%238E9BAC' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
}

.city-select:focus { border-color: var(--blue); }

/* Divider */
.filter-divider {
  height: 1px;
  background: var(--grey-100);
  margin: 4px 0 20px;
}

/* Quick prompts */
.quick-prompt {
  width: 100%;
  padding: 10px 12px;
  background: var(--white);
  border: 1.5px solid var(--grey-100);
  border-radius: var(--radius-sm);
  font-family: var(--font);
  font-size: 12px;
  font-weight: 500;
  color: var(--grey-600);
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
  line-height: 1.4;
  margin-bottom: 6px;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.quick-prompt:hover {
  border-color: var(--blue-line);
  color: var(--blue);
  background: var(--electric-10);
}

.quick-prompt-icon {
  font-size: 14px;
  flex-shrink: 0;
  margin-top: 1px;
}

/* Apply filter button */
.apply-btn {
  width: 100%;
  padding: 11px;
  background: var(--blue);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-family: var(--font-cond);
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  cursor: pointer;
  transition: background 0.2s;
  margin-top: 4px;
}

.apply-btn:hover { background: var(--blue-mid); }
.apply-btn:active { background: var(--blue); transform: translateY(1px); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN / CHAT AREA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main {
  display: flex;
  flex-direction: column;
  background: var(--white);
  overflow: hidden;
}

/* Chat header bar */
.chat-topbar {
  height: 52px;
  border-bottom: 1px solid var(--grey-100);
  padding: 0 28px;
  display: flex;
  align-items: center;
  gap: 12px;
  background: var(--white);
  flex-shrink: 0;
}

.chat-topbar-title {
  font-family: var(--font-cond);
  font-size: 15px;
  font-weight: 700;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--grey-900);
}

.chat-topbar-sub {
  font-size: 12px;
  color: var(--grey-400);
  font-weight: 400;
}

.topbar-actions {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 8px;
}

.icon-btn {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  border: 1.5px solid var(--grey-100);
  background: var(--white);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 15px;
  color: var(--grey-600);
  transition: all 0.15s;
}

.icon-btn:hover {
  border-color: var(--blue-line);
  color: var(--blue);
  background: var(--electric-10);
}

/* â”€â”€ Chat feed â”€â”€ */
.chat-feed {
  flex: 1;
  overflow-y: auto;
  padding: 0;
  display: flex;
  flex-direction: column;
}

.chat-feed::-webkit-scrollbar { width: 4px; }
.chat-feed::-webkit-scrollbar-thumb { background: var(--grey-200); border-radius: 2px; }

/* Welcome hero */
.welcome-hero {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 28px;
  text-align: center;
  gap: 20px;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  background: var(--electric-10);
  border: 1px solid rgba(0,102,255,0.18);
  border-radius: 20px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--electric);
}

.hero-title {
  font-family: var(--font-cond);
  font-size: 48px;
  font-weight: 800;
  letter-spacing: -0.5px;
  color: var(--grey-900);
  line-height: 1.05;
  max-width: 520px;
}

.hero-title span {
  color: var(--blue);
}

.hero-sub {
  font-size: 15px;
  color: var(--grey-600);
  max-width: 420px;
  line-height: 1.65;
  font-weight: 400;
}

/* Blue accent line above title */
.hero-line {
  width: 48px;
  height: 4px;
  background: var(--blue);
  border-radius: 2px;
}

/* Agent capabilities */
.hero-caps {
  display: flex;
  gap: 16px;
  margin-top: 8px;
  flex-wrap: wrap;
  justify-content: center;
}

.hero-cap {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12.5px;
  font-weight: 600;
  color: var(--grey-600);
}

.hero-cap::before {
  content: '';
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--blue);
}

/* Messages */
.messages-area {
  padding: 24px 28px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.msg-row {
  display: flex;
  gap: 12px;
  animation: msgIn 0.25s ease;
}

@keyframes msgIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

.msg-row.user {
  flex-direction: row-reverse;
}

.msg-avatar {
  width: 34px;
  height: 34px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 15px;
  flex-shrink: 0;
}

.msg-row.user   .msg-avatar { background: var(--grey-100); }
.msg-row.ai     .msg-avatar {
  background: var(--blue);
  color: white;
  font-size: 14px;
  font-weight: 700;
  font-family: var(--font-cond);
  letter-spacing: 0.5px;
}

.msg-content {
  max-width: 72%;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.msg-row.user .msg-content { align-items: flex-end; }

.msg-bubble {
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 14px;
  line-height: 1.65;
  white-space: pre-wrap;
}

.msg-row.user .msg-bubble {
  background: var(--blue);
  color: white;
  border-bottom-right-radius: 3px;
}

.msg-row.ai .msg-bubble {
  background: var(--grey-50);
  border: 1px solid var(--grey-100);
  color: var(--grey-900);
  border-bottom-left-radius: 3px;
}

.msg-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--grey-400);
  font-weight: 500;
}

/* Provider badge */
.p-badge {
  padding: 2px 7px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.8px;
  text-transform: uppercase;
}

.p-badge.gemini  { background: rgba(0,51,153,0.08); color: var(--blue); }
.p-badge.groq    { background: rgba(0,166,81,0.1); color: var(--green); }
.p-badge.fallback { background: var(--amber-light); color: var(--amber); }

/* Tool trace */
.tool-trace {
  margin-top: 4px;
  border: 1px solid var(--grey-100);
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: var(--white);
}

.trace-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  cursor: pointer;
  font-size: 11.5px;
  font-weight: 600;
  color: var(--grey-600);
  letter-spacing: 0.3px;
  user-select: none;
  background: var(--grey-50);
  border-bottom: 1px solid transparent;
  transition: background 0.15s;
}

.trace-toggle:hover { background: var(--grey-100); }
.trace-toggle.open  { border-bottom-color: var(--grey-100); }

.trace-icon { font-size: 13px; }
.trace-chevron {
  margin-left: auto;
  font-size: 10px;
  color: var(--grey-400);
  transition: transform 0.2s;
}
.trace-toggle.open .trace-chevron { transform: rotate(180deg); }

.trace-body {
  display: none;
  flex-direction: column;
  padding: 8px;
  gap: 4px;
}
.trace-body.open { display: flex; }

.trace-step {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 4px;
  background: var(--off-white);
  border: 1px solid var(--grey-100);
}

.trace-num {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--blue);
  color: white;
  font-size: 9px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.trace-fn {
  font-family: 'Courier New', monospace;
  font-size: 11px;
  color: var(--blue);
  font-weight: 700;
  flex-shrink: 0;
}

.trace-args {
  font-size: 11px;
  color: var(--grey-600);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

/* Filter result notice */
.filter-notice {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--electric-10);
  border: 1px solid rgba(0,102,255,0.15);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--blue-mid);
  font-weight: 500;
  animation: msgIn 0.25s ease;
}

/* Typing indicator */
.typing-row {
  display: flex;
  gap: 12px;
  animation: msgIn 0.25s ease;
}

.typing-bubble {
  padding: 12px 16px;
  background: var(--grey-50);
  border: 1px solid var(--grey-100);
  border-radius: 12px;
  border-bottom-left-radius: 3px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.typing-label {
  font-size: 13px;
  color: var(--grey-400);
  font-style: italic;
}

.dots { display: flex; gap: 4px; align-items: center; }
.dots span {
  width: 5px; height: 5px;
  border-radius: 50%;
  background: var(--blue);
  animation: dotBounce 1.3s infinite;
  opacity: 0.5;
}
.dots span:nth-child(2) { animation-delay: 0.18s; }
.dots span:nth-child(3) { animation-delay: 0.36s; }

@keyframes dotBounce {
  0%, 80%, 100% { transform: translateY(0); opacity: 0.4; }
  40% { transform: translateY(-5px); opacity: 1; }
}

/* Agent step ticker (while loading) */
.step-ticker {
  font-size: 11px;
  color: var(--grey-400);
  font-style: italic;
}

/* â”€â”€ Input area â”€â”€ */
.input-area {
  border-top: 1px solid var(--grey-100);
  padding: 16px 28px;
  background: var(--white);
  flex-shrink: 0;
}

.input-row {
  display: flex;
  align-items: flex-end;
  gap: 10px;
  padding: 10px 14px;
  border: 2px solid var(--grey-200);
  border-radius: 12px;
  background: var(--white);
  transition: border-color 0.2s;
}

.input-row:focus-within {
  border-color: var(--blue);
}

.chat-input {
  flex: 1;
  border: none;
  outline: none;
  font-family: var(--font);
  font-size: 14px;
  color: var(--grey-900);
  resize: none;
  min-height: 22px;
  max-height: 100px;
  line-height: 1.5;
  background: transparent;
}

.chat-input::placeholder { color: var(--grey-400); }

.send-btn {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: var(--blue);
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: background 0.15s, transform 0.1s;
  margin-bottom: 1px;
}

.send-btn:hover { background: var(--blue-mid); }
.send-btn:active { transform: scale(0.95); }
.send-btn:disabled { background: var(--grey-200); cursor: not-allowed; }

.send-btn svg {
  width: 16px;
  height: 16px;
  fill: white;
}

/* Input footer */
.input-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 8px;
  padding: 0 2px;
}

.input-hint {
  font-size: 11px;
  color: var(--grey-400);
}

.groq-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11.5px;
  font-weight: 600;
  color: var(--grey-400);
  cursor: pointer;
  padding: 3px 8px;
  border-radius: 4px;
  border: 1px solid var(--grey-100);
  transition: all 0.15s;
}

.groq-toggle:hover { border-color: var(--green); color: var(--green); }
.groq-toggle.active { border-color: var(--green); color: var(--green); background: var(--green-light); }

.toggle-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--grey-200);
  transition: background 0.15s;
}
.groq-toggle.active .toggle-dot { background: var(--green); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTER RESULT STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.result-strip {
  padding: 0 28px;
  display: none;
}

.result-strip.visible {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.result-strip-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;
  border-top: 1px solid var(--grey-100);
}

.result-strip-title {
  font-family: var(--font-cond);
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--grey-900);
}

.result-count {
  font-size: 12px;
  color: var(--grey-400);
  font-weight: 500;
}

.clear-filter {
  font-size: 11.5px;
  font-weight: 600;
  color: var(--grey-400);
  cursor: pointer;
  padding: 3px 8px;
  border: 1px solid var(--grey-100);
  border-radius: 4px;
  transition: all 0.15s;
}
.clear-filter:hover { color: var(--red); border-color: rgba(220,38,38,0.25); }

.result-cars {
  display: flex;
  gap: 10px;
  padding: 10px 0 12px;
  overflow-x: auto;
  scrollbar-width: none;
}
.result-cars::-webkit-scrollbar { display: none; }

.car-pill {
  flex-shrink: 0;
  padding: 8px 14px;
  background: var(--white);
  border: 1.5px solid var(--grey-100);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.car-pill:hover {
  border-color: var(--blue-line);
  background: var(--electric-10);
}

.car-pill-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--grey-900);
}

.car-pill-price {
  font-size: 11px;
  color: var(--grey-400);
  font-weight: 500;
}

.car-pill-fuel {
  font-size: 10.5px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 3px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING / OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.agent-banner {
  display: none;
  align-items: center;
  gap: 10px;
  padding: 8px 28px;
  background: var(--electric-10);
  border-top: 1px solid rgba(0,102,255,0.12);
  border-bottom: 1px solid rgba(0,102,255,0.12);
  font-size: 12px;
  font-weight: 600;
  color: var(--blue);
  letter-spacing: 0.3px;
}
.agent-banner.visible { display: flex; }

.banner-spinner {
  width: 14px; height: 14px;
  border: 2px solid rgba(0,51,153,0.2);
  border-top-color: var(--blue);
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
  flex-shrink: 0;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 999;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.toast {
  padding: 10px 16px;
  background: var(--grey-900);
  color: white;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  box-shadow: var(--shadow-lg);
  animation: toastIn 0.3s ease;
  max-width: 300px;
}
.toast.success { background: var(--green); }
.toast.error   { background: var(--red); }

@keyframes toastIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

</style>
</head>
<body>

<!-- â•â•â• TOP BAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="topbar">
  <div class="logo-mark">
    <!-- Tata "T" SVG -->
    <div class="logo-t">
      <svg viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="3" width="16" height="3" rx="1.5"/>
        <rect x="9.5" y="3" width="3" height="16" rx="1.5"/>
      </svg>
    </div>
    <div class="logo-text">
      <span class="brand">Tata Motors</span>
      <span class="sub">Car Buying Advisor</span>
    </div>
  </div>

  <div class="topbar-divider"></div>
  <span class="topbar-product">Agentic AI Â· UpGrad KnowledgeHut</span>

  <!-- Live API Status -->
  <div class="topbar-status">
    <div class="api-pill checking" id="gemini-pill">
      <div class="dot"></div>
      <span>Gemini</span>
    </div>
    <div class="api-pill checking" id="groq-pill">
      <div class="dot"></div>
      <span>Groq</span>
    </div>
    <div class="active-provider" id="active-provider" style="display:none;">
      <span id="active-provider-label">â€”</span>
    </div>
  </div>
</header>

<!-- â•â•â• APP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="app">

  <!-- â”€â”€ SIDEBAR â”€â”€ -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">Filter &amp; Search</div>
    </div>
    <div class="sidebar-body">

      <!-- Budget -->
      <div class="filter-section">
        <div class="filter-label">Budget (Lakhs) <span id="budget-label">â‚¹6L â€“ â‚¹30L</span></div>
        <div class="range-wrap">
          <input type="range" id="bmin" min="5" max="30" value="6"  step="0.5" oninput="updateBudget()">
          <input type="range" id="bmax" min="5" max="30" value="30" step="0.5" oninput="updateBudget()">
        </div>
      </div>

      <!-- Fuel -->
      <div class="filter-section">
        <div class="filter-label">Fuel Type</div>
        <div class="chips">
          <div class="chip active" data-val="any"    onclick="toggleChip(this,'fuel')">Any</div>
          <div class="chip"        data-val="Petrol"  onclick="toggleChip(this,'fuel')">Petrol</div>
          <div class="chip"        data-val="Diesel"  onclick="toggleChip(this,'fuel')">Diesel</div>
          <div class="chip"        data-val="CNG"     onclick="toggleChip(this,'fuel')">CNG</div>
          <div class="chip"        data-val="EV"      onclick="toggleChip(this,'fuel')">EV</div>
        </div>
      </div>

      <!-- Seats -->
      <div class="filter-section">
        <div class="filter-label">Minimum Seats</div>
        <div class="chips">
          <div class="chip active" data-val="4" onclick="toggleChip(this,'seats')">4+</div>
          <div class="chip"        data-val="5" onclick="toggleChip(this,'seats')">5+</div>
          <div class="chip"        data-val="7" onclick="toggleChip(this,'seats')">7 only</div>
        </div>
      </div>

      <!-- City -->
      <div class="filter-section">
        <div class="filter-label">Your City</div>
        <select class="city-select" id="filter-city">
          <option>Mumbai</option><option>Delhi</option>
          <option selected>Bangalore</option><option>Chennai</option>
          <option>Hyderabad</option><option>Kolkata</option>
          <option>Pune</option><option>Ahmedabad</option>
          <option>Jaipur</option><option>Kochi</option>
          <option>Lucknow</option><option>Shimla</option>
        </select>
      </div>

      <button class="apply-btn" onclick="applyFilter()">Search Cars</button>

      <div class="filter-divider" style="margin-top:20px;"></div>

      <!-- Quick prompts -->
      <div class="filter-section">
        <div class="filter-label">Quick Ask</div>
        <button class="quick-prompt" onclick="sendQuick('I live in Mumbai, daily 25 km city drive. Budget â‚¹8â€“12 lakhs. Petrol preferred. Suggest best Tata car.')">
          <span class="quick-prompt-icon">ğŸŒŠ</span>
          Mumbai city commuter, â‚¹8â€“12L petrol
        </button>
        <button class="quick-prompt" onclick="sendQuick('Hyderabad, family of 4, budget â‚¹12â€“18 lakhs, open to petrol or diesel. 35 km/day city + monthly 300 km highway trips.')">
          <span class="quick-prompt-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
          Hyderabad family car, â‚¹12â€“18L
        </button>
        <button class="quick-prompt" onclick="sendQuick('I want an EV. I live in Bangalore. Budget â‚¹15â€“25 lakhs. Daily drive 40 km. Charging at home possible.')">
          <span class="quick-prompt-icon">âš¡</span>
          EV under â‚¹25L in Bangalore
        </button>
        <button class="quick-prompt" onclick="sendQuick('Shimla hills terrain. Budget â‚¹18â€“28 lakhs. Diesel. Need ground clearance and power for steep roads.')">
          <span class="quick-prompt-icon">â›°ï¸</span>
          Shimla hills, diesel, â‚¹18â€“28L
        </button>
        <button class="quick-prompt" onclick="sendQuick('First time car buyer in Delhi. Very tight budget, max â‚¹8 lakhs. Petrol or CNG. What are my Tata options?')">
          <span class="quick-prompt-icon">ğŸ¯</span>
          First car under â‚¹8L, Delhi
        </button>
      </div>

    </div>
  </aside>

  <!-- â”€â”€ MAIN CHAT â”€â”€ -->
  <main class="main">

    <!-- Chat sub-topbar -->
    <div class="chat-topbar">
      <span class="chat-topbar-title">AI Advisor</span>
      <span class="chat-topbar-sub">â€” Tell me your needs in plain English</span>
      <div class="topbar-actions">
        <button class="icon-btn" title="Clear chat" onclick="clearChat()">ğŸ—‘</button>
      </div>
    </div>

    <!-- Agent busy banner -->
    <div class="agent-banner" id="agent-banner">
      <div class="banner-spinner"></div>
      <span id="banner-text">Agent working â€” calling tools...</span>
    </div>

    <!-- Filter result strip -->
    <div class="result-strip" id="result-strip">
      <div class="result-strip-header">
        <div class="result-strip-title">Filter Results</div>
        <div style="display:flex;align-items:center;gap:10px;">
          <span class="result-count" id="result-count"></span>
          <span class="clear-filter" onclick="clearFilter()">âœ• Clear</span>
        </div>
      </div>
      <div class="result-cars" id="result-cars"></div>
    </div>

    <!-- Chat feed -->
    <div class="chat-feed" id="chat-feed">
      <div class="welcome-hero" id="welcome-hero">
        <div class="hero-badge">âš¡ Agentic AI Â· Gemini + Groq</div>
        <div class="hero-line"></div>
        <h1 class="hero-title">Find Your Perfect <span>Tata Car</span></h1>
        <p class="hero-sub">Tell me your city, budget, family size, and how you drive. I'll check live weather, fuel prices, and calculate total ownership cost.</p>
        <div class="hero-caps">
          <span class="hero-cap">Live weather data</span>
          <span class="hero-cap">Real fuel prices</span>
          <span class="hero-cap">5-year TCO</span>
          <span class="hero-cap">Auto AI fallback</span>
        </div>
      </div>
      <div class="messages-area" id="messages-area" style="display:none;"></div>
    </div>

    <!-- Input -->
    <div class="input-area">
      <div class="input-row">
        <textarea
          id="chat-input"
          class="chat-input"
          placeholder="e.g. I'm in Chennai, budget â‚¹10â€“16 lakhs, family of 4, need good AC..."
          rows="1"
          onkeydown="handleKey(event)"
          oninput="autoGrow(this)"
        ></textarea>
        <button class="send-btn" id="send-btn" onclick="sendMessage()" title="Send (Enter)">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
        </button>
      </div>
      <div class="input-footer">
        <span class="input-hint">Enter to send Â· Shift+Enter for new line</span>
        <div class="groq-toggle" id="groq-toggle" onclick="toggleGroq()">
          <div class="toggle-dot"></div>
          Force Groq
        </div>
      </div>
    </div>

  </main>
</div>

<!-- Toast container -->
<div class="toast-container" id="toasts"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const API = window.location.origin + '/api'; // auto-detects localhost vs AWS
let forceGroq = false;
let busy      = false;

const FUEL_COLORS = {
  Petrol: '#F59E0B', Diesel: '#3B82F6',
  CNG: '#10B981', EV: '#6366F1'
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', () => {
  checkStatus();
  setInterval(checkStatus, 25000);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LIVE STATUS CHECK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function checkStatus() {
  const gPill = document.getElementById('gemini-pill');
  const qPill = document.getElementById('groq-pill');
  const aTag  = document.getElementById('active-provider');
  const aLbl  = document.getElementById('active-provider-label');

  try {
    const r    = await fetch(`${API}/status`, { signal: AbortSignal.timeout(5000) });
    const data = await r.json();

    // Gemini
    if (data.gemini) {
      gPill.className = 'api-pill online';
      gPill.innerHTML = '<div class="dot"></div><span>Gemini âœ“</span>';
    } else {
      gPill.className = 'api-pill offline';
      gPill.innerHTML = '<div class="dot"></div><span>Gemini âœ—</span>';
    }

    // Groq
    if (data.groq) {
      qPill.className = 'api-pill online';
      qPill.innerHTML = '<div class="dot"></div><span>Groq âœ“</span>';
    } else {
      qPill.className = 'api-pill offline';
      qPill.innerHTML = '<div class="dot"></div><span>Groq âœ—</span>';
    }

    // Active provider tag
    if (forceGroq && data.groq) {
      aTag.style.display = 'flex';
      aLbl.textContent   = 'âš¡ Groq Active';
    } else if (data.gemini) {
      aTag.style.display = 'flex';
      aLbl.textContent   = 'âœ¦ Gemini Primary';
    } else if (data.groq) {
      aTag.style.display = 'flex';
      aLbl.textContent   = 'âš¡ Groq Fallback';
    } else {
      aTag.style.display = 'none';
    }
  } catch {
    gPill.className = 'api-pill offline';
    gPill.innerHTML = '<div class="dot"></div><span>Gemini â€”</span>';
    qPill.className = 'api-pill offline';
    qPill.innerHTML = '<div class="dot"></div><span>Groq â€”</span>';
    aTag.style.display = 'none';
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHAT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function handleKey(e) {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
}

function autoGrow(el) {
  el.style.height = 'auto';
  el.style.height = Math.min(el.scrollHeight, 100) + 'px';
}

function toggleGroq() {
  forceGroq = !forceGroq;
  document.getElementById('groq-toggle').classList.toggle('active', forceGroq);
  checkStatus();
}

function sendQuick(text) {
  document.getElementById('chat-input').value = text;
  sendMessage();
}

async function sendMessage() {
  const el    = document.getElementById('chat-input');
  const query = el.value.trim();
  if (!query || busy) return;

  // Show messages area
  document.getElementById('welcome-hero').style.display  = 'none';
  document.getElementById('messages-area').style.display = 'flex';

  appendUserMsg(query);
  el.value = '';
  el.style.height = 'auto';

  const typingId = appendTyping();
  setBusy(true);

  try {
    const r    = await fetch(`${API}/chat`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ query, force_groq: forceGroq })
    });
    const data = await r.json();
    removeTyping(typingId);

    if (data.error) {
      appendAiMsg(`âš ï¸ ${data.error}`, [], null);
    } else {
      appendAiMsg(data.answer, data.tool_log || [], {
        provider: data.provider,
        model:    data.model,
        elapsed:  data.elapsed_seconds,
        fallback: data.fallback_used
      });
      // Update active provider badge
      const aLbl = document.getElementById('active-provider-label');
      const aTag = document.getElementById('active-provider');
      aTag.style.display = 'flex';
      if (data.fallback_used) {
        aLbl.textContent = 'âš¡ Groq Fallback';
      } else if (data.provider === 'groq') {
        aLbl.textContent = 'âš¡ Groq Active';
      } else {
        aLbl.textContent = 'âœ¦ Gemini Primary';
      }
    }
  } catch (e) {
    removeTyping(typingId);
    appendAiMsg('âš ï¸ Cannot reach backend. Run:\n\npython app.py', [], null);
  } finally {
    setBusy(false);
  }
}

function appendUserMsg(text) {
  const area = document.getElementById('messages-area');
  const div  = document.createElement('div');
  div.className = 'msg-row user';
  div.innerHTML = `
    <div class="msg-avatar">ğŸ‘¤</div>
    <div class="msg-content">
      <div class="msg-bubble">${esc(text)}</div>
    </div>`;
  area.appendChild(div);
  scrollFeed();
}

function appendAiMsg(text, toolLog, meta) {
  const area = document.getElementById('messages-area');
  const div  = document.createElement('div');
  div.className = 'msg-row ai';

  let meta_html = '';
  if (meta) {
    const pb = meta.provider === 'groq'
      ? `<span class="p-badge groq">Groq</span>${meta.fallback ? '<span class="p-badge fallback">Fallback</span>' : ''}`
      : `<span class="p-badge gemini">Gemini</span>`;
    meta_html = `<div class="msg-meta">${pb}<span>${meta.model}</span><span>Â· ${meta.elapsed}s</span></div>`;
  }

  let trace_html = '';
  if (toolLog && toolLog.length > 0) {
    const trId = 'tr' + Date.now();
    const steps = toolLog.map(t => `
      <div class="trace-step">
        <div class="trace-num">${t.step}</div>
        <div class="trace-fn">${t.tool}()</div>
        <div class="trace-args">${JSON.stringify(t.args).slice(0,70)}</div>
      </div>`).join('');
    trace_html = `
      <div class="tool-trace">
        <div class="trace-toggle" id="tt-${trId}" onclick="toggleTrace('${trId}')">
          <span class="trace-icon">ğŸ”§</span>
          <span>${toolLog.length} tool call${toolLog.length > 1 ? 's' : ''} made</span>
          <span class="trace-chevron">â–¼</span>
        </div>
        <div class="trace-body" id="tb-${trId}">${steps}</div>
      </div>`;
  }

  div.innerHTML = `
    <div class="msg-avatar">T</div>
    <div class="msg-content">
      <div class="msg-bubble">${esc(text)}</div>
      ${meta_html}
      ${trace_html}
    </div>`;
  area.appendChild(div);
  scrollFeed();
}

function appendTyping() {
  const area = document.getElementById('messages-area');
  const div  = document.createElement('div');
  const id   = 'tp' + Date.now();
  div.id     = id;
  div.className = 'typing-row';
  div.innerHTML = `
    <div class="msg-avatar" style="background:var(--blue);color:white;font-family:var(--font-cond);font-size:14px;font-weight:700;">T</div>
    <div class="typing-bubble">
      <div class="dots"><span></span><span></span><span></span></div>
      <span class="typing-label" id="tl-${id}">Agent thinking...</span>
    </div>`;
  area.appendChild(div);
  scrollFeed();

  // Rotate labels
  const labels = ['Calling tools...','Checking weather...','Getting fuel prices...','Calculating costs...','Composing answer...'];
  let li = 0;
  const interval = setInterval(() => {
    const el = document.getElementById(`tl-${id}`);
    if (!el) { clearInterval(interval); return; }
    el.textContent = labels[li++ % labels.length];
  }, 2200);
  div._interval = interval;
  return id;
}

function removeTyping(id) {
  const el = document.getElementById(id);
  if (el) { clearInterval(el._interval); el.remove(); }
}

function toggleTrace(id) {
  const body = document.getElementById(`tb-${id}`);
  const tog  = document.getElementById(`tt-${id}`);
  const open = body.classList.toggle('open');
  tog.classList.toggle('open', open);
}

function setBusy(state) {
  busy = state;
  document.getElementById('send-btn').disabled = state;
  document.getElementById('agent-banner').classList.toggle('visible', state);
}

function scrollFeed() {
  const feed = document.getElementById('chat-feed');
  setTimeout(() => feed.scrollTop = feed.scrollHeight, 50);
}

function clearChat() {
  document.getElementById('messages-area').innerHTML = '';
  document.getElementById('messages-area').style.display = 'none';
  document.getElementById('welcome-hero').style.display  = 'flex';
  clearFilter();
}

function esc(s) {
  return s
    .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
    .replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>')
    .replace(/ğŸ¥‡|ğŸ¥ˆ|ğŸ¥‰/g, m => `<span style="font-size:16px;">${m}</span>`);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FILTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let selFuel  = 'any';
let selSeats = 4;

function updateBudget() {
  const mn = parseFloat(document.getElementById('bmin').value);
  const mx = parseFloat(document.getElementById('bmax').value);
  document.getElementById('budget-label').textContent = `â‚¹${mn}L â€“ â‚¹${Math.max(mn+0.5,mx)}L`;
}

function toggleChip(el, group) {
  document.querySelectorAll(`[data-val]`).forEach(c => {
    // only deactivate chips in same group
    if (c.closest('.chips') === el.closest('.chips')) c.classList.remove('active');
  });
  el.classList.add('active');
  if (group === 'fuel')  selFuel  = el.dataset.val;
  if (group === 'seats') selSeats = parseInt(el.dataset.val);
}

async function applyFilter() {
  const mn   = parseFloat(document.getElementById('bmin').value);
  const mx   = parseFloat(document.getElementById('bmax').value);
  const city = document.getElementById('filter-city').value;

  try {
    const r    = await fetch(`${API}/filter`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        budget_min: mn,
        budget_max: Math.max(mn + 0.5, mx),
        fuel: selFuel, seats: selSeats
      })
    });
    const data = await r.json();
    showFilterResult(data.matching_cars || [], city);
  } catch {
    toast('Backend not reachable â€” run python app.py', 'error');
  }
}

function showFilterResult(cars, city) {
  const strip = document.getElementById('result-strip');
  const count = document.getElementById('result-count');
  const list  = document.getElementById('result-cars');

  if (!cars.length) {
    toast('No cars found for these filters', 'error');
    clearFilter();
    return;
  }

  count.textContent = `${cars.length} car${cars.length > 1 ? 's' : ''} found`;
  list.innerHTML = cars.map(c => {
    const fuels = c.fuel_types.map(f =>
      `<span class="car-pill-fuel" style="background:${FUEL_COLORS[f]}22;color:${FUEL_COLORS[f]};">${f}</span>`
    ).join(' ');
    return `
    <div class="car-pill" onclick="askAboutCar('${c.name}','${city}')">
      <div>
        <div class="car-pill-name">${c.name}</div>
        <div class="car-pill-price">â‚¹${c.price_min}Lâ€“${c.price_max}L</div>
      </div>
      <div>${fuels}</div>
    </div>`;
  }).join('');
  strip.classList.add('visible');
}

function askAboutCar(name, city) {
  const q = `Tell me about the ${name} for someone in ${city}. Include fuel costs, monthly EMI estimate, and who it's best for.`;
  sendQuick(q);
}

function clearFilter() {
  document.getElementById('result-strip').classList.remove('visible');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TOAST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toast(msg, type = '') {
  const el = document.createElement('div');
  el.className = `toast ${type}`;
  el.textContent = msg;
  document.getElementById('toasts').appendChild(el);
  setTimeout(() => el.remove(), 3500);
}
</script>
</body>
</html>